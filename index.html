<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>AdigaFX Trade Journal</title>

  <!-- Telegram Mini App -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css?v=33" />
</head>

<body>
  <div id="app">

    <!-- HEADER -->
    <header class="header">
      <div class="brand">
        <div class="brand-name">AdigaFX</div>
        <div class="brand-sub">XAUUSD • Trade Journal</div>
      </div>
    </header>

    <!-- NAV TABS -->
    <nav class="tabs">
      <button class="tab active" data-screen="dashboard">Home</button>
      <button class="tab" data-screen="checklist">Checklist</button>
      <button class="tab" data-screen="new">New</button>
      <button class="tab" data-screen="close">Close</button>
      <button class="tab" data-screen="review">Review</button>
      <button class="tab" data-screen="all">All Trades</button>
      <button class="tab" data-screen="settings">Settings</button>
    </nav>

    <!-- DASHBOARD -->
    <section class="screen active" id="screen-dashboard">
      <div class="card-grid">
        <div class="card">
          <div class="label">Total PnL</div>
          <div class="value" id="stat-total-pnl">$0</div>
        </div>
        <div class="card">
          <div class="label">Win Rate</div>
          <div class="value" id="stat-winrate">0%</div>
        </div>
        <div class="card">
          <div class="label">Avg R</div>
          <div class="value" id="stat-avgr">0.00R</div>
        </div>
        <div class="card">
          <div class="label">Trades</div>
          <div class="value" id="stat-trades">0</div>
        </div>

        <div class="card">
          <div class="label">Best Trade</div>
          <div class="value" id="stat-best">$0</div>
        </div>
        <div class="card">
          <div class="label">Worst Trade</div>
          <div class="value" id="stat-worst">$0</div>
        </div>

        <div class="card">
          <div class="label">MAE Avg</div>
          <div class="value" id="stat-mae">$0</div>
        </div>
        <div class="card">
          <div class="label">MFE Avg</div>
          <div class="value" id="stat-mfe">$0</div>
        </div>

        <div class="card">
          <div class="label">Streak</div>
          <div class="value" id="stat-streak">W0 / L0</div>
        </div>

        <div class="card">
          <div class="label">Discipline Cost</div>
          <div class="value" id="stat-discipline">$0</div>
        </div>
      </div>

      <div class="section">
        <h3>Recent Trades</h3>
        <div id="recent-trades"></div>
      </div>
    </section>

    <!-- CHECKLIST -->
    <section class="screen" id="screen-checklist">
      <h2>Pre-Trade Checklist (optional)</h2>

      <div class="checklist">
        <label><input type="checkbox"> Trend aligned</label>
        <label><input type="checkbox"> Key level</label>
        <label><input type="checkbox"> Confirmation</label>
        <label><input type="checkbox"> RR acceptable</label>
        <label><input type="checkbox"> News checked</label>
        <label><input type="checkbox"> Mindset OK</label>
      </div>

      <button id="checklist-add-trade" class="primary-btn">
        Add Trade
      </button>
    </section>

    <!-- NEW TRADE -->
    <section class="screen" id="screen-new">
      <h2>New Trade</h2>

      <div class="form">
        <label>Direction</label>
        <select id="new-direction">
          <option value="LONG">LONG</option>
          <option value="SHORT">SHORT</option>
        </select>

        <label>Entry</label>
        <input type="number" id="new-entry" />

        <label>Stop Loss</label>
        <input type="number" id="new-sl" />

        <label>Lot Size</label>
        <input type="number" id="new-lot" />

        <label>Session</label>
        <select id="new-session">
          <option value="">—</option>
          <option value="Asia">Asia</option>
          <option value="London">London</option>
          <option value="NY">New York</option>
        </select>

        <label>Strategy / Setup</label>
        <input type="text" id="new-setup" />

        <label>Notes</label>
        <textarea id="new-notes"></textarea>

        <button id="save-new-trade" class="primary-btn">
          Save Trade
        </button>
      </div>
    </section>

    <!-- CLOSE TRADE -->
    <section class="screen" id="screen-close">
      <h2>Close Trade</h2>

      <button id="pick-open-trade" class="secondary-btn">
        Select Open Trade
      </button>

      <div id="close-selected-info"></div>

      <div class="form">
        <label>Exit Price</label>
        <input type="number" id="close-exit" />

        <label>MAE (worst price)</label>
        <input type="number" id="close-mae" />
        <small>MAE = Maximum Adverse Excursion (worst drawdown)</small>

        <label>MFE (best price)</label>
        <input type="number" id="close-mfe" />
        <small>MFE = Maximum Favorable Excursion (best move)</small>

        <button id="confirm-close-trade" class="primary-btn">
          Close Trade
        </button>
      </div>
    </section>

    <!-- REVIEW -->
    <section class="screen" id="screen-review">
      <h2>Trade Review</h2>

      <button id="pick-review-trade" class="secondary-btn">
        Select Trade
      </button>

      <div class="form">
        <label>Followed Plan?</label>
        <select id="review-plan">
          <option value="YES">Yes</option>
          <option value="NO">No</option>
        </select>

        <label>Mistake</label>
        <input type="text" id="review-mistake" />

        <label>Review Notes</label>
        <textarea id="review-notes"></textarea>

        <button id="save-review" class="primary-btn">
          Save Review
        </button>
      </div>
    </section>

    <!-- ALL TRADES -->
    <section class="screen" id="screen-all">
      <h2>All Trades</h2>
      <div id="all-trades-list"></div>
    </section>

    <!-- SETTINGS -->
    <section class="screen" id="screen-settings">
      <h2>Settings</h2>

      <div class="settings-card">
        <h3>Sharing</h3>
        <button id="share-snapshot" class="secondary-btn">
          Share Snapshot
        </button>
      </div>

      <div class="settings-card">
        <h3>Privacy</h3>
        <label>
          <input type="checkbox" id="toggle-hide-pnl" />
          Hide PnL amounts
        </label>
      </div>

      <div class="settings-card danger">
        <h3>Danger Zone</h3>
        <button id="reset-data" class="danger-btn">
          Reset all data
        </button>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
      Built by <strong>FaShuSh</strong> for <strong>AdigaFX</strong>
    </footer>

  </div>

  <!-- App Logic -->
  <script src="app.js?v=33"></script>
</body>
</html>
