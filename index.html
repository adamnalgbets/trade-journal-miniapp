<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>AdigaFX Trade Journal</title>

  <link rel="icon" href="adigafx_icon.png"/>
  <link rel="stylesheet" href="styles.css?v=35"/>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>
  <div class="app">

    <header class="top">
      <div class="brand">
        <img src="adigafx_logo_128.png" class="logo" alt="AdigaFX"/>
        <div>
          <div class="title">AdigaFX</div>
          <div class="subtitle">XAUUSD ‚Ä¢ Trade Journal (Local)</div>
        </div>
      </div>
      <button class="btn ghost small" id="openSettingsBtn" type="button">‚öôÔ∏è</button>
    </header>

    <nav class="tabs">
      <button class="tab active" data-route="dash" type="button">Home</button>
      <button class="tab" data-route="check" type="button">Checklist</button>
      <button class="tab" data-route="new" type="button">New</button>
      <button class="tab" data-route="close" type="button">Close</button>
      <button class="tab" data-route="review" type="button">Review</button>
      <button class="tab" data-route="all" type="button">All</button>
      <button class="tab" data-route="edit" type="button">Edit</button>
      <button class="tab" data-route="settings" type="button">Settings</button>
      <button class="tab" data-route="snapshot" type="button">Snapshot</button>
    </nav>

    <!-- HOME -->
    <section class="screen active" id="screen-dash">
      <div class="seg" id="timeSeg">
        <button class="segBtn active" type="button" data-time="ALL">ALL</button>
        <button class="segBtn" type="button" data-time="TODAY">TODAY</button>
        <button class="segBtn" type="button" data-time="WEEK">WEEK</button>
        <button class="segBtn" type="button" data-time="MONTH">MONTH</button>
      </div>

      <div class="panel">
        <div class="panelTitle">Overview</div>
        <div class="dashGrid">
          <div class="dashCard"><div class="k">Total PnL</div><div class="big" id="statPnl">$0.00</div><div class="k" id="statPnlMeta"></div></div>
          <div class="dashCard"><div class="k">Win Rate</div><div class="big" id="statWinRate">0%</div><div class="k" id="statWins"></div></div>
          <div class="dashCard"><div class="k">Avg R</div><div class="big" id="statAvgR">0.00R</div><div class="k" id="statExp"></div></div>
          <div class="dashCard"><div class="k">Open Risk</div><div class="big" id="statOpenRisk">$0.00</div><div class="k" id="statOpenCount"></div></div>

          <div class="dashCard"><div class="k">MAE Avg</div><div class="big" id="statMaeAvg">$0.00</div></div>
          <div class="dashCard"><div class="k">MFE Avg</div><div class="big" id="statMfeAvg">$0.00</div></div>
          <div class="dashCard"><div class="k">Best / Worst</div><div class="big" id="statBestWorst">$0 / $0</div></div>
          <div class="dashCard"><div class="k">Streak</div><div class="big" id="statStreak">‚Äî</div><div class="k" id="statStreakMeta"></div></div>

          <div class="dashCard"><div class="k">Discipline Cost</div><div class="big" id="statDiscipline">$0.00</div><div class="k" id="statDisciplineMeta"></div></div>
          <div class="dashCard"><div class="k">Top Setup</div><div class="big" id="statTopSetup">‚Äî</div><div class="k" id="statTopSetupHint"></div></div>
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">Sessions</div>
        <div class="dashGrid">
          <div class="dashCard"><div class="k">Asia</div><div class="big" id="sessAsia">$0</div><div class="k" id="sessAsiaMeta"></div></div>
          <div class="dashCard"><div class="k">London</div><div class="big" id="sessLondon">$0</div><div class="k" id="sessLondonMeta"></div></div>
          <div class="dashCard"><div class="k">New York</div><div class="big" id="sessNY">$0</div><div class="k" id="sessNYMeta"></div></div>
          <div class="dashCard"><div class="k">Unknown</div><div class="big" id="sessU">$0</div><div class="k" id="sessUMeta"></div></div>
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">Recent (filtered)</div>
        <div id="tradesList" class="list"></div>
      </div>
    </section>

    <!-- CHECKLIST -->
    <section class="screen" id="screen-check">
      <div class="panel">
        <div class="panelTitle">Pre-Trade Checklist (optional)</div>

        <div class="form">
          <div class="row">
            <label>Direction</label>
            <div class="seg" id="cDirSeg">
              <button class="segBtn active" type="button" data-dir="LONG">LONG</button>
              <button class="segBtn" type="button" data-dir="SHORT">SHORT</button>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Date</label><input id="cDate" type="date"/></div>
            <div class="row">
              <label>Session</label>
              <select id="cSession">
                <option value="">‚Äî</option>
                <option value="Asia">Asia</option>
                <option value="London">London</option>
                <option value="NY">NY</option>
              </select>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Entry</label><input id="cEntry" type="number" step="0.01"/></div>
            <div class="row"><label>Stop Loss</label><input id="cSL" type="number" step="0.01"/></div>
          </div>

          <div class="grid2">
            <div class="row"><label>Lot</label><input id="cLot" type="number" step="0.01"/></div>
            <div class="row"><label>TP (optional)</label><input id="cTP" type="number" step="0.01"/></div>
          </div>

          <div class="kv"><span class="k">Risk $:</span> <span class="v" id="cRiskUsd">$0.00</span></div>

          <div class="maeBox">
            <div class="maeTitle">Checklist (NOT required)</div>
            <div class="maeText">Leave unchecked if you want ‚Äî still saves.</div>

            <div class="checkCols">
              <label><input type="checkbox" class="cBox"/> Trend aligned</label>
              <label><input type="checkbox" class="cBox"/> Key level</label>
              <label><input type="checkbox" class="cBox"/> Confirmation</label>
              <label><input type="checkbox" class="cBox"/> RR OK</label>
              <label><input type="checkbox" class="cBox"/> News checked</label>
              <label><input type="checkbox" class="cBox"/> Mindset OK</label>
            </div>

            <div class="row">
              <label>Notes</label>
              <textarea id="cNotes" rows="3"></textarea>
            </div>

            <button class="btn" id="cAddTradeBtn" type="button">‚úÖ Add OPEN trade</button>
          </div>
        </div>
      </div>
    </section>

    <!-- NEW -->
    <section class="screen" id="screen-new">
      <div class="panel">
        <div class="panelTitle">New Trade</div>

        <div class="form">
          <div class="row">
            <label>Direction</label>
            <div class="seg" id="dirSeg">
              <button class="segBtn active" type="button" data-dir="LONG">LONG</button>
              <button class="segBtn" type="button" data-dir="SHORT">SHORT</button>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Date</label><input id="fDate" type="date"/></div>
            <div class="row">
              <label>Session</label>
              <select id="fSession">
                <option value="">‚Äî</option>
                <option value="Asia">Asia</option>
                <option value="London">London</option>
                <option value="NY">NY</option>
              </select>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Entry</label><input id="fEntry" type="number" step="0.01"/></div>
            <div class="row"><label>Stop Loss</label><input id="fSL" type="number" step="0.01"/></div>
          </div>

          <div class="grid2">
            <div class="row"><label>TP (optional)</label><input id="fTP" type="number" step="0.01"/></div>
            <div class="row"><label>Lot</label><input id="fLot" type="number" step="0.01"/></div>
          </div>

          <div class="row"><label>Strategy / Setup</label><input id="fStrategy" placeholder="e.g. Sweep + MSS"/></div>
          <div class="row"><label>Notes</label><textarea id="fNotes" rows="3"></textarea></div>

          <div class="kv"><span class="k">Risk $:</span> <span class="v" id="riskUsd">$0.00</span></div>

          <button class="btn" id="saveTradeBtn" type="button">‚úÖ Save OPEN</button>
        </div>
      </div>
    </section>

    <!-- CLOSE -->
    <section class="screen" id="screen-close">
      <div class="panel">
        <div class="panelTitle">Close Trade</div>

        <div class="row">
          <label>Select OPEN trade</label>
          <select id="closeSelect"></select>
        </div>
        <div class="kv" id="closeMeta"></div>

        <div class="grid2">
          <div class="row"><label>Exit price</label><input id="closeExit" type="number" step="0.01"/></div>
          <div class="row"><label>PnL ($) (if no exit)</label><input id="closePnl" type="number" step="0.01"/></div>
        </div>

        <div class="maeBox">
          <div class="maeTitle">MAE / MFE</div>
          <div class="maeText">
            <b>MAE</b> = Maximum Adverse Excursion (worst against you) ‚Ä¢
            <b>MFE</b> = Maximum Favorable Excursion (best for you)
          </div>
          <div class="maeArt">
            LONG: MAE=<span class="red">lowest</span> ‚Ä¢ MFE=<span class="green">highest</span><br/>
            SHORT: MAE=<span class="red">highest</span> ‚Ä¢ MFE=<span class="green">lowest</span>
          </div>

          <div class="grid2">
            <div class="row">
              <label>MAE price (worst)</label>
              <input id="closeMAE" type="number" step="0.01"/>
              <div class="kv"><span class="k">MAE $:</span> <span class="v" id="closeMAEUsd">$0.00</span></div>
            </div>
            <div class="row">
              <label>MFE price (best)</label>
              <input id="closeMFE" type="number" step="0.01"/>
              <div class="kv"><span class="k">MFE $:</span> <span class="v" id="closeMFEUsd">$0.00</span></div>
            </div>
          </div>

          <div class="kv"><span class="k">Risk $:</span> <span class="v" id="closeRiskUsd">$0.00</span></div>
          <div class="kv"><span class="k">R result:</span> <span class="v" id="closeR">0.00R</span></div>
        </div>

        <button class="btn" id="closeTradeBtn" type="button">üèÅ Close & Save</button>
      </div>
    </section>

    <!-- REVIEW -->
    <section class="screen" id="screen-review">
      <div class="panel">
        <div class="panelTitle">Review Trade</div>

        <div class="row">
          <label>Select trade</label>
          <select id="reviewSelect"></select>
        </div>
        <div class="kv" id="reviewMeta"></div>

        <div class="form">
          <div class="row">
            <label>Followed plan?</label>
            <select id="rPlan">
              <option value="YES">YES</option>
              <option value="NO">NO</option>
            </select>
          </div>

          <div class="row">
            <label>Discipline mistake type</label>
            <select id="rMistakeType">
              <option value="">None</option>
              <option value="Moved SL">Moved SL</option>
              <option value="Early Exit">Early Exit</option>
              <option value="Late Entry">Late Entry</option>
              <option value="Overtrade">Overtrade</option>
              <option value="Revenge">Revenge</option>
              <option value="FOMO">FOMO</option>
              <option value="No SL">No SL</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="row"><label>Mistake note (optional)</label><input id="rMistake"/></div>
          <div class="row"><label>Review notes</label><textarea id="rReviewNotes" rows="4"></textarea></div>

          <button class="btn" id="saveReviewBtn" type="button">üíæ Save review</button>
        </div>
      </div>
    </section>

    <!-- ALL -->
    <section class="screen" id="screen-all">
      <div class="panel">
        <div class="panelTitle">All Trades (filtered)</div>
        <div id="allTradesList" class="list"></div>
      </div>
    </section>

    <!-- EDIT -->
    <section class="screen" id="screen-edit">
      <div class="panel">
        <div class="panelTitle">Edit Trade</div>

        <div class="row">
          <label>Select trade</label>
          <select id="editSelect"></select>
        </div>
        <div class="kv" id="editMeta"></div>

        <div class="form">
          <div class="row">
            <label>Status</label>
            <select id="eStatus">
              <option value="OPEN">OPEN</option>
              <option value="CLOSED">CLOSED</option>
            </select>
          </div>

          <div class="row">
            <label>Direction</label>
            <div class="seg" id="eDirSeg">
              <button class="segBtn active" type="button" data-dir="LONG">LONG</button>
              <button class="segBtn" type="button" data-dir="SHORT">SHORT</button>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Date</label><input id="eDate" type="date"/></div>
            <div class="row">
              <label>Session</label>
              <select id="eSession">
                <option value="">‚Äî</option>
                <option value="Asia">Asia</option>
                <option value="London">London</option>
                <option value="NY">NY</option>
              </select>
            </div>
          </div>

          <div class="grid2">
            <div class="row"><label>Entry</label><input id="eEntry" type="number" step="0.01"/></div>
            <div class="row"><label>Stop Loss</label><input id="eSL" type="number" step="0.01"/></div>
          </div>

          <div class="grid2">
            <div class="row"><label>TP</label><input id="eTP" type="number" step="0.01"/></div>
            <div class="row"><label>Lot</label><input id="eLot" type="number" step="0.01"/></div>
          </div>

          <div class="grid2">
            <div class="row"><label>Exit</label><input id="eExit" type="number" step="0.01"/></div>
            <div class="row"><label>PnL (if no exit)</label><input id="ePnl" type="number" step="0.01"/></div>
          </div>

          <div class="maeBox">
            <div class="maeTitle">MAE / MFE</div>
            <div class="maeText">MAE = worst against you ‚Ä¢ MFE = best for you</div>
            <div class="maeArt">
              LONG: MAE <span class="red">lowest</span> ‚Ä¢ MFE <span class="green">highest</span><br/>
              SHORT: MAE <span class="red">highest</span> ‚Ä¢ MFE <span class="green">lowest</span>
            </div>

            <div class="grid2">
              <div class="row">
                <label>MAE price</label>
                <input id="eMAE" type="number" step="0.01"/>
                <div class="kv"><span class="k">MAE $:</span> <span class="v" id="eMAEUsd">$0.00</span></div>
              </div>
              <div class="row">
                <label>MFE price</label>
                <input id="eMFE" type="number" step="0.01"/>
                <div class="kv"><span class="k">MFE $:</span> <span class="v" id="eMFEUsd">$0.00</span></div>
              </div>
            </div>

            <div class="kv"><span class="k">Risk $:</span> <span class="v" id="eRisk">$0.00</span></div>
            <div class="kv"><span class="k">R:</span> <span class="v" id="eR">0.00R</span></div>
          </div>

          <div class="row"><label>Strategy / Setup</label><input id="eStrategy"/></div>
          <div class="row"><label>Notes</label><textarea id="eNotes" rows="4"></textarea></div>

          <button class="btn" id="saveEditBtn" type="button">üíæ Save changes</button>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="screen" id="screen-settings">
      <div class="panel">
        <div class="panelTitle">Sharing</div>
        <div class="row2">
          <button class="btn" id="shareSnapshotBtn" type="button">Share Snapshot</button>
          <button class="btn ghost" id="exportJsonBtn" type="button">Export JSON</button>
        </div>

        <div class="row" style="margin-top:10px;">
          <label>Import JSON</label>
          <textarea id="importJsonText" rows="6" placeholder='Paste backup JSON here...'></textarea>
          <div class="row2" style="margin-top:10px;">
            <button class="btn" id="importReplaceBtn" type="button">Import (Replace)</button>
            <button class="btn ghost" id="importMergeBtn" type="button">Import (Merge)</button>
          </div>
          <div class="kv" id="importMsg"></div>
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">Language</div>
        <div class="seg" id="langSeg">
          <button class="segBtn active" type="button" data-lang="EN">EN</button>
          <button class="segBtn" type="button" data-lang="HE">HE</button>
        </div>
        <div class="maeText" style="margin-top:10px;">
          Default is EN. Toggle is saved (full translation can be added later).
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">Privacy</div>
        <label class="switchLine">
          <input type="checkbox" id="hidePnlToggle"/>
          <span>Hide PnL amounts (default OFF)</span>
        </label>
      </div>

      <div class="panel danger">
        <div class="panelTitle">Danger zone</div>
        <button class="btn danger" id="resetAllBtn" type="button">Reset all data</button>
        <div class="maeText" style="margin-top:8px;">Deletes everything saved locally on this device.</div>
      </div>
    </section>

    <!-- SNAPSHOT -->
    <section class="screen" id="screen-snapshot">
      <div class="panel snapshot">
        <div class="snapHeader">
          <div class="snapBrand">
            <div class="snapTitle">AdigaFX</div>
            <div class="snapSub" id="snapPeriod">Trading Snapshot</div>
          </div>
          <div class="snapLogo">XAUUSD</div>
        </div>

        <div class="snapGrid" id="snapGrid"></div>

        <div class="snapSection">
          <div class="snapSectionTitle">Sessions</div>
          <div class="snapSess" id="snapSessions"></div>
        </div>

        <div class="snapFooter">
          Built by <b>FaShuSh</b> for <b>AdigaFX</b> ‚Ä¢ v35
        </div>
      </div>

      <div class="row2" style="margin-top:10px;">
        <button class="btn ghost" id="snapBackBtn" type="button">Back</button>
        <button class="btn" id="snapTipBtn" type="button">How to share</button>
      </div>
    </section>

    <div class="quickActions">
      <button class="btn" id="qaNew" type="button">+</button>
      <button class="btn ghost" id="qaChecklist" type="button">‚úì</button>
      <button class="btn ghost" id="qaClose" type="button">‚èπ</button>
      <button class="btn ghost" id="qaAll" type="button">‚â°</button>
    </div>

    <footer class="credit">
      Built by <b>FaShuSh</b> for <b>AdigaFX</b>
    </footer>
  </div>

  <script src="app.js?v=35"></script>
</body>
</html>
